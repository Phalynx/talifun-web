#summary An http handler that will serve static files in a cached, compressed and resumable manner.
#labels Static,File,compress,cached,resumable,partial,206,304

= Introduction =

An http handler that will serve static files in a cached, compressed and resumable manner.

It generates consistent etags and the correct meta tags for caching on proxies and locally. This is especially useful when you don't have control over the configuration of the webserver.

It supports the following caching http header tags:

  * Accept-Ranges
  * ETag
  * Expires
  * Last-Modified
  * Range
  * If-Range
  * If-Match
  * If-None-Match
  * If-Modified-Since
  * If-Unmodified-Since
  * Unless-Modified-Since

It can also serve cached requests and compressed cached requests from memory bypassing the hard drive. 

= When to use it =

When you want to serve static files. For example jpg, gif, xls, pdf, mp3, avi.

= Features =

  * Resumable downloads (206 partial)
  * Client side caching (304 not modified): ETags, expires
  * Compression: none, gzip, deflate
  * Server side caching: stores original and compressed content in memory, bypassing hard drive. This can really speed up web requests. Partial content can be served from memory too.

= Configuration =

{{{
<configuration>
	<configSections>
		<section name="StaticFileHandler" type="Talifun.Web.StaticFile.Config.StaticFileHandlerSection, Talifun.Web" requirePermission="false" allowDefinition="MachineToApplication"/>
	</configSections>
	<StaticFileHandler>
		<!-- The defaults to use when an extension is found that does not have a specific rule  -->
		<fileExtensionDefault name="Default" serveFromMemory="true" maxMemorySize="100000" compress="true"/>
		<!-- Specific rules for extension types -->
		<fileExtensions>
			<fileExtension name="CommonStaticContent" extension="css, js, htm, html, swf, xml, xslt, txt" serveFromMemory="true" maxMemorySize="5000000" compress="true"/>
			<fileExtension name="OfficeDocumentStaticContent" extension="doc, xls, ppt" serveFromMemory="true" maxMemorySize="100000" compress="true"/>
			<!-- Dont compress pdfs as they are already compressed and sending compressed pdf is know to cause problems -->
			<fileExtension name="PdfDocumentStaticContent" extension="pdf" serveFromMemory="true" maxMemorySize="100000" compress="false"/>			
			<!-- Dont compress images as they are already compressed -->
			<fileExtension name="ImagesStaticContent" extension="png, jpg, jpeg, gif, ico" serveFromMemory="true" maxMemorySize="500000" compress="false"/>
			<!-- Dont compress audio as they are already compressed -->
			<fileExtension name="AudioStaticContent" extension="wav, mp3, m4a, aac" serveFromMemory="true" maxMemorySize="100000" compress="false"/>
			<!-- Dont compress videos as they are already compressed -->
			<fileExtension name="VideoStaticContent" extension="3gp, 3g2, asf, avi, dv, flv, mov, mp4, mpg, mpeg, wmv" serveFromMemory="true" maxMemorySize="100000" compress="false"/>
			<!-- Dont compress compressed content -->
			<fileExtension name="CompressedStaticContent" extension="zip, rar, 7z, arj" serveFromMemory="true" maxMemorySize="100000" compress="false"/>
		</fileExtensions>
	</StaticFileHandler>
	<system.web>
		<httpHandlers>
			<!-- All the extensions that should be handled by static file handler -->
			<add verb="GET,HEAD" path="*.css,*.js,*.htm,*.html,*.xml,*.txt,*.xslt,*.swf,*.jpg,*.jpeg,*.gif,*.png,*.bmp,*.ico,*.wav,*.mp3,*.m4a,*.aac,*.3gp,*.3g2,*.asf,*.avi,*.dv,*.flv,*.mov,*.mp4,*.mpg,*.mpeg,*.wmv,*.pdf,*.xls,*.doc,*.ppt,*.swf,*.zip,*.rar" type="Talifun.Web.StaticFile.StaticFileAsyncHandler, Talifun.Web"/>
		</httpHandlers>
	</system.web>
<configuration>
}}}